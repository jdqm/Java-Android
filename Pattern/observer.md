# 观察者模式

>观察者模式：定义了对象之间的一对多依赖，这样一来，当一个对象状态改变了，它的所有依赖者都会收到通知并自动更新。为交互对象之间的松散耦合而设计。

![observer.png](http://upload-images.jianshu.io/upload_images/3631399-e307463d91028868.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


设计原则
- 针对接口编程，而不是针对实现编程；
- 找出程序中变化的部分，让其和不变的部分分离；
- 多用组合，少用继承；

优点：
- 交互的对象（观察者和被观察者）之间松耦合，双方依赖于抽象接口，从而使得各自的变换都不会影响另一边的变换。

缺点：
- 在应用观察者模式时需要考虑一下开发效率和运行效率的问题，程序中包括一个被观察者、多个观察者，开发、调试等内容会比较复杂；
-  在Java中消息的通知一般是顺序执行，若其中一个观察者发生阻塞现象，会影响整体的执行效率，在这种情况下，考虑超时策略，或者采用异步实现；
-  双方通信效率问题，使用push的方式通知，有可能交互了一些无用的数据，这种情况下可以提供pull的方式，就像Java内置的Observer。pull的指的是，只通知观察者转态改变了，但是不传数据，观察者自己来拉取想要的数据，那随之而来的是要提供一套公开的接口让观察者调用，也出现了多次通信的问题。